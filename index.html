<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Track your Dota 2 progress, analyze match statistics, and improve your gameplay with detailed analytics.">
    <title>Dota 2 Progress Tracker</title>
    
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://api.opendota.com">
    <link rel="preconnect" href="https://cdn.cloudflare.steamstatic.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>DOTA 2 TRACKER</h1>
            <p class="subtitle">Elevate Your Game</p>
        </header>

        <div class="input-section">
            <input 
                type="text" 
                id="steamId" 
                placeholder="Enter Steam ID or OpenDota Player ID" 
                aria-label="Steam ID or OpenDota Player ID"
            />
            <button onclick="fetchData()" aria-label="Load player statistics">
                üöÄ Load Stats
            </button>
            <button 
                onclick="refreshData()" 
                style="display: none;" 
                id="refreshBtn"
                aria-label="Refresh player statistics"
            >
                üîÑ Refresh
            </button>
        </div>

        <div class="loading">
            <div class="loading-spinner"></div>
            <p>Summoning the Ancient's wisdom...</p>
        </div>

        <div class="error" id="error" role="alert"></div>

        <div id="content" style="display: none;">
            <div class="profile-header" id="profileHeader" style="display: none;">
                <div class="profile-avatar" id="profileAvatar">üë§</div>
                <div class="profile-info">
                    <div class="profile-name" id="profileName">Anonymous Hero</div>
                    <div class="profile-stats">
                        <div class="profile-stat">
                            <span class="profile-stat-label">Total Matches</span>
                            <span class="profile-stat-value" id="profileMatches">0</span>
                        </div>
                        <div class="profile-stat">
                            <span class="profile-stat-label">Win Rate</span>
                            <span class="profile-stat-value" id="profileWinrate">0%</span>
                        </div>
                        <div class="profile-stat">
                            <span class="profile-stat-label">Best Streak</span>
                            <span class="profile-stat-value" id="profileStreak">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="rank-display" id="rankDisplay" style="display: none;">
                <div class="rank-medal" id="rankMedal">üéñÔ∏è</div>
                <div class="rank-title" id="rankTitle">Unranked</div>
                <div class="mmr-value" id="mmrValue">Calibrating...</div>
            </div>

            <div class="tabs" role="tablist">
                <div class="tab active" role="tab" aria-selected="true" onclick="switchTab(event, 'overview')">
                    Overview
                </div>
                <div class="tab" role="tab" aria-selected="false" onclick="switchTab(event, 'heroes')">
                    Heroes
                </div>
                <div class="tab" role="tab" aria-selected="false" onclick="switchTab(event, 'matches')">
                    Matches
                </div>
                <div class="tab" role="tab" aria-selected="false" onclick="switchTab(event, 'charts')">
                    Analytics
                </div>
            </div>

            <div id="overview" class="tab-content active" role="tabpanel">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üèÜ</div>
                        <div class="stat-label">Total Matches</div>
                        <div class="stat-value" id="totalMatches">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-label">Win Rate</div>
                        <div class="stat-value" id="winRate">0%</div>
                        <div class="winrate-bar">
                            <div class="winrate-fill" id="winrateFill"></div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚öîÔ∏è</div>
                        <div class="stat-label">Average KDA</div>
                        <div class="stat-value" id="avgKDA">0.0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üî•</div>
                        <div class="stat-label">Recent Form</div>
                        <div class="stat-value" id="recentForm">0W - 0L</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-label">Average GPM</div>
                        <div class="stat-value" id="avgGPM">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-label">Average XPM</div>
                        <div class="stat-value" id="avgXPM">0</div>
                    </div>
                </div>
            </div>

            <div id="heroes" class="tab-content" role="tabpanel">
                <h2>Your Hero Pool</h2>
                <div class="hero-grid" id="heroGrid"></div>
            </div>

            <div id="matches" class="tab-content" role="tabpanel">
                <h2>Recent Battles</h2>
                <div class="match-list" id="matchList"></div>
            </div>

            <div id="charts" class="tab-content" role="tabpanel">
                <div class="chart-container">
                    <div class="chart-title">Win/Loss Streaks (Last 20 Games)</div>
                    <canvas id="winStreakChart" class="chart-canvas"></canvas>
                </div>
                
                <div class="chart-container">
                    <div class="chart-title">Performance Radar</div>
                    <canvas id="performanceRadar" class="chart-canvas"></canvas>
                </div>
                
                <div class="chart-container">
                    <div class="chart-title">GPM/XPM Trends</div>
                    <canvas id="gpmXpmChart" class="chart-canvas"></canvas>
                </div>
                
                <div class="chart-container">
                    <div class="chart-title">Hero Performance Matrix</div>
                    <canvas id="heroMatrix" class="chart-canvas"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="app.js"></script>
</body>
</html>